mutation attemptProblem($input: AttemptProblemInput!, $ancestorIds: [String!]!) {
  attemptProblem(attempt: $input) {
    result {
      userExercise {
        ...userExerciseFields
        __typename
      }
      updatedTask {
        ... on PracticeTask {
          ...practiceTaskFields
          __typename
        }
        ... on MasteryChallengeTask {
          ...masteryChallengeTaskFields
          __typename
        }
        ... on SubjectChallengeTask {
          ...courseChallengeTaskFields
          __typename
        }
        ... on TopicQuizTask {
          ...quizTaskFields
          __typename
        }
        ... on TopicUnitTestTask {
          ...unitTestTaskFields
          __typename
        }
        __typename
      }
      newTask {
        cards {
          ...problemCardFields
          __typename
        }
        task {
          ... on PracticeTask {
            ...practiceTaskFields
            __typename
          }
          __typename
        }
        userExercises {
          ...userExerciseFields
          __typename
        }
        __typename
      }
      actionResults {
        attemptCorrect
        notificationsAdded {
          avatarParts
          badges
          readable
          toast
          urgent
          continueUrl
          __typename
        }
        pointsEarned {
          points
          __typename
        }
        updatedStpStreakLength
        updatedCourseProficiencyLevel
        __typename
      }
      attemptPromotions {
        fpmPromotions {
          progressKey
          level
          __typename
        }
        __typename
      }
      updatedRecommendations {
        contentId
        kind
        sourceId
        __typename
      }
      error {
        code
        debugMessage
        uuid
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment courseChallengeTaskFields on SubjectChallengeTask {
  id
  key
  completionCriteria {
    name
    __typename
  }
  contentKey
  isCompleted
  pointBounty
  pointsEarned
  promotionCriteria {
    ...promotionCriteriaFields
    __typename
  }
  reservedItems
  reservedItemsCompleted
  taskAttemptHistory {
    ...taskAttemptHistoryFields
    __typename
  }
  taskType
  __typename
}

fragment masteryChallengeTaskFields on MasteryChallengeTask {
  id
  key
  completionCriteria {
    name
    __typename
  }
  expirationTime
  isCompleted
  pointBounty
  pointsEarned
  promotionCriteria {
    ...promotionCriteriaFields
    __typename
  }
  reservedItems
  reservedItemsCompleted
  taskAttemptHistory {
    ...taskAttemptHistoryFields
    __typename
  }
  taskType
  __typename
}

fragment practiceTaskFields on PracticeTask {
  id
  key
  bonusReservedItems
  bonusReservedItemsCompleted
  bonusTaskAttemptHistory {
    ...taskAttemptHistoryFields
    __typename
  }
  canRestart
  completionCriteria {
    name
    __typename
  }
  contentKey
  exerciseLength
  isCompleted
  pointBounty
  pointsEarned
  promotionCriteria {
    ...promotionCriteriaFields
    __typename
  }
  reservedItems
  reservedItemsCompleted
  slug
  taskAttemptHistory {
    ...taskAttemptHistoryFields
    __typename
  }
  taskType
  timeEstimate {
    lowerBound
    upperBound
    __typename
  }
  __typename
}

fragment problemCardFields on ProblemCard {
  cardType
  done
  exerciseName
  problemType
  __typename
}

fragment problemTypeFields on ProblemType {
  items {
    id
    live
    sha
    __typename
  }
  name
  relatedVideos
  __typename
}

fragment promotionCriteriaFields on PromotionCriteria {
  name
  value
  __typename
}

fragment quizTaskFields on TopicQuizTask {
  id
  key
  canRestart
  completionCriteria {
    name
    __typename
  }
  contentKey
  isCompleted
  pointBounty
  pointsEarned
  promotionCriteria {
    ...promotionCriteriaFields
    __typename
  }
  reservedItems
  reservedItemsCompleted
  taskAttemptHistory {
    ...taskAttemptHistoryFields
    __typename
  }
  taskType
  __typename
}

fragment taskAttemptHistoryFields on TaskProblemAttempt {
  correct
  timeDone
  seenHint
  itemId
  __typename
}

fragment unitTestTaskFields on TopicUnitTestTask {
  id
  key
  canRestart
  completionCriteria {
    name
    __typename
  }
  contentKey
  isCompleted
  pointBounty
  pointsEarned
  promotionCriteria {
    ...promotionCriteriaFields
    __typename
  }
  reservedItems
  reservedItemsCompleted
  taskAttemptHistory {
    ...taskAttemptHistoryFields
    __typename
  }
  taskType
  __typename
}

fragment userExerciseFields on UserExercise {
  exerciseModel: exercise {
    id
    assessmentItemCount: numAssessmentItems
    displayName
    isQuiz
    isSkillCheck
    name
    nodeSlug
    progressKey
    translatedDisplayName
    relatedContent {
      id
      contentKind
      kind
      thumbnailUrl
      translatedTitle
      urlWithinCurationNode
      urlWithinClosestAncestor(ancestorIds: $ancestorIds)
      topicPaths {
        path {
          id
          kind
          slug
          __typename
        }
        __typename
      }
      ... on Article {
        kaUrl
        nodeSlug
        relativeUrl
        slug
        __typename
      }
      ... on Video {
        duration
        imageUrl
        kaUrl
        nodeSlug
        relativeUrl
        slug
        translatedYoutubeId
        __typename
      }
      __typename
    }
    relatedVideos {
      contentKind
      duration
      id
      imageUrl
      kaUrl
      kind
      nodeSlug
      progressKey
      relativeUrl
      slug
      thumbnailUrl
      translatedDescription
      translatedTitle
      translatedYoutubeId
      __typename
    }
    problemTypes {
      ...problemTypeFields
      __typename
    }
    translatedProblemTypes {
      ...problemTypeFields
      __typename
    }
    __typename
  }
  exercise: exerciseName
  fpmMasteryLevel
  lastAttemptNumber
  lastCountHints
  lastDone
  lastMasteryUpdate
  longestStreak
  maximumExerciseProgressDt: maximumExerciseProgressDate
  streak
  totalCorrect
  totalDone
  __typename
}