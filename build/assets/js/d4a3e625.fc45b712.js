"use strict";(self.webpackChunkkhan_api_docs=self.webpackChunkkhan_api_docs||[]).push([[4209],{3471:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var a=s(5893),n=s(1151);const r={},i="Safelist",o={id:"safelist",title:"Safelist",description:'Khan Academy\'s internal GraphQL API only allows a set of "safelisted" queries and mutations for security reasons. This can lead to your app breaking when Khan inevitably changes these to make way for new features or remove old ones. This repository keeps track of the queries and mutations that are currently safelisted.',source:"@site/docs/safelist.md",sourceDirName:".",slug:"/safelist",permalink:"/docs/safelist",draft:!1,unlisted:!1,editUrl:"https://github.com/bhavjitChauhan/khan-api/tree/docs/docs/safelist.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Installation",permalink:"/docs/getting-started/installation"},next:{title:"Proxy",permalink:"/docs/proxy"}},l={},c=[{value:"Usage",id:"usage",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,n.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{id:"safelist",children:"Safelist"}),"\n",(0,a.jsx)(t.p,{children:'Khan Academy\'s internal GraphQL API only allows a set of "safelisted" queries and mutations for security reasons. This can lead to your app breaking when Khan inevitably changes these to make way for new features or remove old ones. This repository keeps track of the queries and mutations that are currently safelisted.'}),"\n",(0,a.jsx)(t.admonition,{type:"info",children:(0,a.jsxs)(t.p,{children:["Since version ",(0,a.jsx)(t.a,{href:"https://github.com/bhavjitChauhan/khan-api/releases/tag/v0.6.0",children:"0.6.0"}),", the library will seemlessly fall back to using the safelist if any query is outdated"]})}),"\n",(0,a.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsxs)(t.p,{children:["Get the latest ",(0,a.jsx)(t.code,{children:"getFullUserProfile"})," query:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:"const GET_FULL_USER_PROFILE_QUERY = await fetch('https://cdn.jsdelivr.net/gh/bhavjitChauhan/khan-api@safelist/query/getFullUserProfile')\r\n    .then((response) => response.text());\n"})}),"\n",(0,a.jsx)(t.p,{children:"You can either use the safelist for every request or as a fallback when a request fails."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:"const response = await fetch(/* ... */)\r\nif (response.status === 403) {\r\n    // Fall back to the safelist\r\n}\n"})})]})}function d(e={}){const{wrapper:t}={...(0,n.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},1151:(e,t,s)=>{s.d(t,{Z:()=>o,a:()=>i});var a=s(7294);const n={},r=a.createContext(n);function i(e){const t=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),a.createElement(r.Provider,{value:t},e.children)}}}]);