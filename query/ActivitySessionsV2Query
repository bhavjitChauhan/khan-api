query ActivitySessionsV2Query($studentKaid: String!, $endDate: Date, $startDate: Date, $courseType: String, $activityKind: String, $after: ID, $pageSize: Int) {
  user(kaid: $studentKaid) {
    id
    exams {
      id
      examId
      metadata {
        id
        nameInfo {
          name
          __typename
        }
        __typename
      }
      __typename
    }
    activityLogV2(
      endDate: $endDate
      startDate: $startDate
      courseType: $courseType
      activityKind: $activityKind
    ) {
      time {
        exerciseMinutes
        totalMinutes
        __typename
      }
      activitySessions(pageSize: $pageSize, after: $after) {
        sessions {
          ... on BasicActivitySession {
            ...ActivitySession
            aiGuideThread {
              title
              id
              __typename
            }
            essaySession {
              essayTitle
              id
              __typename
            }
            __typename
          }
          ... on MasteryActivitySession {
            ...ActivitySession
            correctCount
            problemCount
            skillLevels {
              ...ActivitySessionSkillLevels
              exercise {
                id
                translatedTitle
                __typename
              }
              __typename
            }
            task {
              id
              isRestarted
              __typename
            }
            __typename
          }
          ... on TestPrepActivitySession {
            ...ActivitySession
            __typename
          }
          __typename
        }
        pageInfo {
          nextCursor
          __typename
        }
        __typename
      }
      __typename
    }
    __typename
  }
}

fragment ActivitySession on ActivitySession {
  id
  title
  subtitle
  activityKind {
    id
    __typename
  }
  durationMinutes
  eventTimestamp
  skillType
  __typename
}

fragment ActivitySessionSkillLevels on SkillLevelChange {
  id
  before
  after
  __typename
}